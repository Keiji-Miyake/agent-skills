# テスト・バリデーションガイド

`tech-writer` スキルの品質を保証するために推奨されるテストシナリオです。
AIは入力の質によって出力が大きく変わるため、異なる条件下で意図した「記事構造」と「考察」が出力されるか確認します。

## テストの観点

1.  **構造遵守率**: 指定したセクション（はじめに、図解、詳細、考察、注意点）が正しく含まれているか。
2.  **ハルシネーション耐性**: 情報が足りない時に、嘘をつかずに「不明」と言えるか、または一般的な解説に留められるか。
3.  **可視化の質**: Mermaid の図が構文エラーにならず、かつ内容を正しく抽象化できているか。

## 推奨テストシナリオ

### 1. 理想的な入力パターン (Happy Path)
詳細な設計書とログがある状態で、高品質な記事が書けるかテストします。

- **入力素材**:
    - `SPEC.md` (仕様書)
    - `git log -p` (具体的なコード変更)
- **確認ポイント**:
    - 「考察」で、SPECに書かれた意図と実際のコードのギャップや工夫について語られているか。
    - 図解が仕様書の内容を正しく反映しているか。

### 2. 情報不足パターン (Low Context)
情報が極端に少ない状態で、どう振る舞うかテストします。

- **入力素材**:
    - 「認証機能を直した」という1行のチャットメッセージのみ。
    - または、コミットメッセージが `fix bug` だけのログ。
- **確認ポイント**:
    - **合格**: 「情報が不足しているため、具体的なコード例は示せませんが...」と前置きしたり、一般的な認証のベストプラクティス論として展開する。
    - **不合格**: 存在しないファイル名や架空のコードを捏造して解説し始める。

### 3. バグ修正パターン (Bug Fix)
トラブルシューティング記事としての有用性をテストします。

- **入力素材**:
    - エラーログ（Stack Trace）。
    - 修正時の `git diff`。
- **確認ポイント**:
    - 「ハマりどころ」セクションが充実しているか。
    - 「なぜそのバグが起きたか」の根本原因（Deep Dive）が書かれているか。

### 4. 大規模リファクタリング (Refactoring)
コード量は多いが機能が変わらないケースでの解説能力をテストします。

- **入力素材**:
    - 数十ファイルに及ぶ `git log --stat` と `git log -p` の一部。
- **確認ポイント**:
    - 個別の行ごとの解説ではなく、**「アーキテクチャの変化」**（Mermaid図）に焦点を当てられているか。
    - 「なぜリファクタリングが必要だったか（Pain Point）」が推測・記述されているか。

## 評価用チェックリスト

テスト後の成果物は、以下のリストで採点してください。

- [ ] タイトルはキャッチーか？（「〜の実装」だけでなく「〜における苦労と解決」など）
- [ ] 3行要約に Pain Point が含まれているか？
- [ ] Mermaid の図はレンダリング可能か？（構文エラーがないか）
- [ ] 「考察 (Insights)」セクションで、トレードオフについて語っているか？
- [ ] 記事の最後に「参考資料」として入力ファイルが明記されているか？
